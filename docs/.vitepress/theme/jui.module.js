var t=Object.defineProperty,e=(e,i,s)=>((e,i,s)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s)(e,"symbol"!=typeof i?i+"":i,s);const i=/* @__PURE__ */new Map,s=/* @__PURE__ */new Map;let n={},o=null;const r=/* @__PURE__ */new WeakMap,a=/* @__PURE__ */new WeakMap;function h(t,e){let i=r.get(t);i||(i=/* @__PURE__ */new Map,r.set(t,i));let s=i.get(e);s||(s=/* @__PURE__ */new Set,i.set(e,s)),o&&(s.add(o),o.deps.push(s))}function l(t,e){const i=r.get(t);if(!i)return;const s=i.get(e);if(s){const t=new Set(s);for(const e of t)e.scheduler?e.scheduler():e()}}function c(t){if("object"!=typeof t||null===t)return t;if(a.has(t))return a.get(t);const e=new Proxy(t,{get(t,e,i){const s=Reflect.get(t,e,i);return h(t,e),"object"==typeof s&&null!==s?c(s):s},set(t,e,i,s){const n=t[e],o=Reflect.set(t,e,i,s);return n!==i&&l(t,e),o}});return a.set(t,e),e}function d(t){const e={i:t,get value(){return h(e,"value"),this.i},set value(t){t!==this.i&&(this.i=t,l(e,"value"))}};return e}function u(t,e={}){const i=(...e)=>{if(o!==i){!function(t){for(const e of t.deps)e.delete(t);t.deps.length=0}(i),o=i;try{return t(...e)}finally{o=null}}};return i.deps=[],i.scheduler=e.scheduler,e.lazy||i(),i}function m(t){let e,i=!0;const s={o:!0,get value(){return h(s,"value"),i&&(e=t(),i=!1),e}};return u(()=>{t()},{scheduler:()=>{i||(i=!0,l(s,"value"))}}),s}const f=t=>null===t?"null":t instanceof HTMLElement?"HTMLElement":Array.isArray(t)?"array":typeof t,p=t=>"function"==typeof t&&null!==t.prototype&&t.prototype.constructor===t,b=(t,e,i,s=[])=>{const n=Array.isArray(i)?i:[i],o=Array.isArray(s)?s:s?[s]:[],r=f(e);if(!n.some(t=>t===r)){const e=n.join(", ");throw new Error(`Validator: ${t} expects ${e}, but got ${r}.`)}for(const a of o){let i,s;if("function"==typeof a)i=a,s="does not satisfy the required condition.";else{if(!a||"function"!=typeof a.test)throw new Error("Validator: Condition must be a function or { test, message }.");i=a.test,s=a.message||"condition failed."}if(!i(e))throw new Error(`Validator: ${t} ${s}`)}},w=t=>"function"==typeof t&&/^class\s/.test(Function.prototype.toString.call(t)),v=(t,e=[],n="",o=!1,r=null)=>{if(!p(t))throw new Error("First argument expects a class/constructor function.");if(!Array.isArray(e))throw new Error("Second argument must be an array of arguments.");if("string"!=typeof n)throw new Error("Third argument expects a string.");if("boolean"!=typeof o)throw new Error("Fourth argument expects a boolean.");if("number"!=typeof r&&null!==r)throw new Error("Fifth argument expects a number or null.");const a=""===n.trim()?j():n;if(i.has(a)&&!o)return i.get(a).proxy;const h=new t(...e),l=new Proxy(h,{get:(t,e,i)=>(r&&function(t,e){s.has(t)&&clearTimeout(s.get(t));const i=setTimeout(()=>{g(t)},e);s.set(t,i)}(a,r),Reflect.get(t,e,i)),set:(t,e,i,s)=>Reflect.set(t,e,i,s)});return i.set(a,{instance:h,proxy:l}),l};function g(t){if(i.has(t)){const{instance:s}=i.get(t);if("function"==typeof s.destroy)try{s.destroy()}catch(e){throw new Error(`release(): destroy() failed on instance with key "${t}".`)}i.delete(t)}s.has(t)&&(clearTimeout(s.get(t)),s.delete(t))}function y(){for(const{instance:e}of i.values())if("function"==typeof e.destroy)try{e.destroy()}catch(t){}i.clear();for(const e of s.values())clearTimeout(e);s.clear()}const x={instances:/* @__PURE__ */new Map,get(t,e){return this.instances.has(t)||this.instances.set(t,e()),this.instances.get(t)},destroy(t){if(this.instances.has(t)){const e=this.instances.get(t);e.destroy&&e.destroy(),this.instances.delete(t)}},destroyAll(){for(const t of this.instances.values())t.destroy&&t.destroy();this.instances.clear()}};function $(t){n=t}function k(){return n}function _(){const t=document.documentElement.getAttribute("lang");if(t){switch(t.substring(0,2).toLowerCase()){case"en":default:return"en";case"zh":return"zh"}}return E()}function E(){return"undefined"==typeof navigator||navigator.language.toLowerCase().startsWith("en")?"en":"zh"}function C(t,e=n,i=null){var s;return null===i&&(i=_()),(null==(s=e[i])?void 0:s[t])||t}function T(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();const t=new Uint8Array(16);if("function"!=typeof crypto.getRandomValues)throw new Error("Your browser is too old to support secure login.");crypto.getRandomValues(t),t[6]=15&t[6]|64,t[8]=63&t[8]|128;const e=Array.from(t).map(t=>t.toString(16).padStart(2,"0")).join("");return[e.slice(0,8),e.slice(8,12),e.slice(12,16),e.slice(16,20),e.slice(20,32)].join("-")}function j(t=8){if(!Number.isInteger(t)||t<1||t>32)throw new Error("Length must be an integer between 1 and 32");const e=new Uint8Array(t);crypto.getRandomValues(e);let i="";for(let s=0;s<t;s++)i+="abcdefghijkmnpqrstuvwxyz23456789"[31&e[s]];return i}function S(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(t).replace(/[&<>"']/g,t=>e[t])}function M(){if("undefined"==typeof navigator)return!1;if(navigator.userAgentData)return navigator.userAgentData.mobile;const t=navigator.userAgent;return/android|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i.test(t)}function A(t){const e=`; ${document.cookie}`.split(`; ${t}=`);return 2===e.length?e.pop().split(";").shift():null}function N(t,e,i=86400){const s=new Date(Date.now()+1e3*i).toUTCString();return document.cookie=[`${t}=${e}`,`expires=${s}`,"path=/","sameSite=strict"].join("; "),A(t)===e}function H(t){return document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`,!A(t)}async function L(t,e){return(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}async function I(t){return"undefined"==typeof window||"undefined"==typeof document?Promise.resolve(!1):("string"!=typeof t&&(t=String(t)),navigator.clipboard&&"function"==typeof navigator.clipboard.writeText?navigator.clipboard.writeText(t).then(()=>!0).catch(()=>D(t)):Promise.resolve(D(t)))}function D(t){let e=null;try{e=document.createElement("textarea"),e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",e.style.opacity="0",document.body.appendChild(e),e.select(),e.setSelectionRange(0,t.length);return!!document.execCommand("copy")}catch(i){return!1}finally{e&&e.parentNode&&e.parentNode.removeChild(e)}}function O(t,e,i,s){if(!t)throw new Error("on(): element is required");t.addEventListener(e,i,s)}function F(t,e,i,s){if(!t)throw new Error("off(): element is required");t.removeEventListener(e,i,s)}function P(t,e=document){return e.querySelector(t)}function q(t){return t instanceof Element?t:"string"==typeof t?P(t):null}function R(t,e={}){if("undefined"==typeof document)throw new Error("newEl() can only be used in browser environment.");if(!1===e.dependency||"function"==typeof e.dependency&&!e.dependency())return"";const{is:i,className:s,id:n,attrs:o,style:r,events:a,text:h,html:l,children:c}=e,d=i?document.createElement(t,{is:i}):document.createElement(t);if(s&&(d.className=s),n&&(d.id=n),o&&"object"==typeof o)for(const[u,m]of Object.entries(o))null!=m&&d.setAttribute(u,String(m));if(r&&"object"==typeof r)for(const[u,m]of Object.entries(r))null!=m&&(d.style[u]=m);if(a&&"object"==typeof a)for(const[u,m]of Object.entries(a))"function"==typeof m&&O(d,u,m);return void 0!==c?Array.isArray(c)?d.append(...c):"string"==typeof c?d.innerHTML=c:c instanceof Node&&d.appendChild(c):void 0!==l?d.innerHTML=l:void 0!==h&&(d.textContent=h),d}const z="undefined"!=typeof window?`${window.location.origin}/wp-json/`:"";function B(t="info",...e){"undefined"!=typeof window&&console[t](...e)}const V=class t{constructor(){this.bindings=/* @__PURE__ */new Map,this.instances=/* @__PURE__ */new Map,this.serviceData=/* @__PURE__ */new Map}static run(){return t.h||(t.h=new t),t.h}bind(t,e,i={}){var s,n,o;if("function"==typeof e){return/^[A-Z]/.test(e.name)||e.prototype&&Object.getOwnPropertyNames(e.prototype).length>1?this.bindClass(t,e,null!=(s=i.singleton)&&s,null!=(n=i.deps)?n:[]):this.bindFactory(t,e,null!=(o=i.singleton)&&o)}return this.bindValue(t,e)}bindClass(t,e,i=!1,s=[]){if("function"!=typeof e)throw new TypeError("bindClass expects a constructor, got "+typeof e);return this.bindings.set(t,{type:"class",Class:e,singleton:i,deps:Array.isArray(s)?s:[]}),this}bindValue(t,e){return this.bindings.set(t,{type:"value",value:e}),this.instances.set(t,e),this}bindFactory(t,e,i=!1){if("function"!=typeof e)throw new TypeError("bindFactory expects a function, got "+typeof e);return this.bindings.set(t,{type:"factory",factory:e,singleton:i}),this}get(t,...e){const i=this.bindings.get(t);if(!i)throw new Error(`Service "${t}" is not bound in the container.`);if("value"===i.type)return i.value;if("factory"===i.type){const s=i.singleton&&0===e.length;if(s&&this.instances.has(t))return this.instances.get(t);const n=i.factory(this,...e);return s&&this.instances.set(t,n),n}if("class"===i.type){const s=i.singleton&&0===e.length;if(s&&this.instances.has(t))return this.instances.get(t);const n=[];for(const e of i.deps){if(!this.bindings.has(e))throw new Error(`Dependency "${e}" required by "${t}" is not bound in the container.`);n.push(this.get(e))}const o=[...n,...e],r=new i.Class(...o);return s&&this.instances.set(t,r),r}throw new Error(`Unknown binding type for service "${t}".`)}has(t){return this.bindings.has(t)}reset(){this.bindings.clear(),this.instances.clear()}setData(t,e,i){if(!this.serviceData.has(t))throw new Error(`Service [${t}] does not exist.`);this.serviceData.get(t).set(e,i)}getData(t,e){if(!this.serviceData.has(t))throw new Error(`Service [${t}] does not exist.`);return this.serviceData.get(t).get(e)}hasData(t,e){if(!this.serviceData.has(t))throw new Error(`Service [${t}] does not exist.`);return this.serviceData.get(t).has(e)}removeData(t,e){if(!this.serviceData.has(t))throw new Error(`Service [${t}] does not exist.`);this.serviceData.get(t).delete(e)}};e(V,"_instance",null),e(V,"PARAM",/* @__PURE__ */Symbol("PARAM"));let Z=V;class U{constructor(t="localStorage"){this.driver=this.l(t)}l(t){switch(t){case"cookie":return new J;case"localStorage":return"undefined"!=typeof localStorage?new X:(console.warn("localStorage not supported, falling back to cookie."),new J);case"indexedDB":return"undefined"!=typeof indexedDB?new Y:(console.warn("indexedDB not supported, falling back to localStorage."),this.l("localStorage"));default:throw new Error(`Unsupported driver: ${t}`)}}set(t,e,i){this.driver.setItem(t,e,i)}get(t){return this.driver.getItem(t)}remove(t){this.driver.removeItem(t)}clear(){this.driver.clear()}has(t){return this.driver.hasItem(t)}}class J{constructor(){this.options={}}setOptions(t){this.options={...this.options,...t}}setItem(t,e,i){let s=`${encodeURIComponent(t)}=${encodeURIComponent(e)}`;if(i){const t=/* @__PURE__ */new Date;t.setTime(t.getTime()+1e3*i),s+=`; expires=${t.toUTCString()}`}for(const[n,o]of Object.entries(this.options))!0===o?s+=`; ${n}`:!1!==o&&null!=o&&(s+=`; ${n}=${o}`);document.cookie=s}getItem(t){const e=document.cookie.split(";");for(const i of e){const[e,s]=i.trim().split("=");if(e===encodeURIComponent(t))return decodeURIComponent(s)}return null}removeItem(t){this.setItem(t,"",-1)}clear(){const t=document.cookie.split(";");for(const e of t){const t=e.split("=")[0].trim();this.removeItem(decodeURIComponent(t))}}hasItem(t){return null!==this.getItem(t)}}class X{setItem(t,e){localStorage.setItem(t,JSON.stringify(e))}getItem(t){const e=localStorage.getItem(t);try{return JSON.parse(e)}catch(i){return e}}removeItem(t){localStorage.removeItem(t)}clear(){localStorage.clear()}hasItem(t){return null!==localStorage.getItem(t)}}class Y{constructor(){this.options={dbName:"StoreDB",version:1,storeName:"data"},this.db=null,this.u()}setOptions(t){this.options={...this.options,...t},this.db&&(this.db.close(),this.u())}u(){const{dbName:t,version:e,storeName:i}=this.options,s=indexedDB.open(t,e);s.onupgradeneeded=t=>{this.db=t.target.result,this.db.objectStoreNames.contains(i)||this.db.createObjectStore(i,{keyPath:"key"})},s.onsuccess=t=>{this.db=t.target.result},s.onerror=t=>{console.error("Failed to open IndexedDB:",t.target.error)}}m(t,e){if(!this.db)throw new Error("IndexedDB is not initialized.");const{storeName:i}=this.options;e(this.db.transaction([i],t).objectStore(i))}setItem(t,e,i){const s={key:t,value:e,expire:i?Date.now()+1e3*i:null};this.m("readwrite",t=>{t.put(s)})}getItem(t){return new Promise((e,i)=>{this.m("readonly",s=>{const n=s.get(t);n.onsuccess=()=>{const t=n.result;t&&(!t.expire||t.expire>Date.now())?e(t.value):e(null)},n.onerror=()=>{i(new Error("Failed to get item from IndexedDB."))}})})}removeItem(t){this.m("readwrite",e=>{e.delete(t)})}clear(){this.m("readwrite",t=>{t.clear()})}hasItem(t){return new Promise((e,i)=>{this.m("readonly",s=>{const n=s.get(t);n.onsuccess=()=>{e(!!n.result)},n.onerror=()=>{i(new Error("Failed to check item existence in IndexedDB."))}})})}}let G=null;class W{constructor(t){this.value=t,this.observers=/* @__PURE__ */new Set}read(){return G&&(this.observers.add(G),G.deps.add(this)),this.value}write(t){if(this.value!==t){this.value=t;for(const t of this.observers)t.schedule()}}}class K{constructor(t){this.fn=t,this.deps=/* @__PURE__ */new Set,this.scheduled=!1,this.schedule=()=>{this.scheduled||(this.scheduled=!0,(t=>{Promise.resolve().then(t)})(()=>{this.scheduled=!1,this.execute()}))},this.execute()}execute(){for(const e of this.deps)e.observers.delete(this);this.deps.clear();const t=G;G=this;try{this.fn()}finally{G=t}}}function Q(t){const e=new W(t);return[()=>e.read(),t=>e.write("function"==typeof t?t(e.value):t)]}function tt(t){new K(t)}function et(t){let e;const[i,s]=Q(void 0);return tt(()=>{e=t(),s(e)}),i}const it=class t{constructor(e){this.options=Object.assign({title:"Tip",content:"",position:"center",confirmText:"Confirm",cancelText:"Cancel",showCancel:!0,showClose:!0,fullscreen:!1,onShow:null,onShown:null,onHide:null,onHidden:null,onConfirm:null,onSubmit:null,fields:null,header:!0,footer:!0,style:null,id:null,escClose:!1,bgClose:!1,lazy:!1},e),this.p(this.options),this.u(this.options),t.instances.add(this)}u(t){this.isVisible=!1,this.fields=null,this.v={},this.root=null,this.$=null,this._=t.fields?JSON.parse(JSON.stringify(t.fields)):[],t.lazy||this.C(t)}get modal(){return this.root?P(".j-modal",this.root):null}get form(){return this.modal?P(".j-form",this.modal):null}get confirmBtn(){return this.modal?P(".modal-confirm",this.modal):null}get cancelBtn(){return this.modal?P(".modal-cancel",this.modal):null}C(t){if(this.root)return;const{header:e,id:i,title:s,position:n}=t,o=e?"aria-labelledby":"aria-label",r=e?`${i}_title`:s||"Modal",a=R("div",{className:`j-popup-layout is-${n}`,attrs:{role:"dialog","aria-modal":"true",[o]:r},children:[this.T(t)]});return this.root=a,a}T(t){const{fullscreen:e,style:i,id:s}=t;return R("div",{className:e?"j-modal is-fullscreen":"j-modal",id:s,attrs:{role:"document",style:i||null},children:[this.j(t),this.S(t),this.M(t)]})}j(t){const{id:e,title:i,header:s,showClose:n}=t;return R("div",{className:"modal-header",html:`<div class="modal-title" id="${e}_title">${i}</div>${n?'<icon class="modal-close" data-action="close" role="button" aria-label="close" tabindex="0">×</icon>':""}`,dependency:()=>s})}M(t){const{showCancel:e,cancelText:i,confirmText:s,footer:n}=t;return R("div",{className:"modal-footer",html:`${e?`<button type="button" class="j-button is-ghost modal-cancel" data-action="close">${i}</button>`:""}<button type="button" class="j-button is-primary modal-confirm" data-action="confirm">${s}</button>`,dependency:()=>n})}S(t){const{fields:e,content:i}=t;return R("div",{className:"modal-body",html:`${e?`<div class="modal-form-container">${this.A(t).outerHTML}</div>`:i}`})}A(t){return R("form",{className:"j-form is-vertical is-item-vertical",children:[...this.N(t.fields)]})}N(t){const e=[];for(const i of t){const t=R("div",{className:"form-item",html:this.H(i)});e.push(t)}return e}H(t){switch(t.type){case"textarea":return this.L(t);case"select":return this.I(t);default:return this.D(t)}}D(t){let e="";const{type:i,required:s,id:n,label:o,name:r,placeholder:a,value:h,disabled:l}=t,c=n||j();switch(i){case"password":e="current-password";break;case"email":e="email";break;default:e="on"}return`<label class="item-label ${s?"is-required":""}" for="${c}">${o}</label><div class="form-control"><input type="${i||"text"}" class="j-input" name="${r}" id="${c}" placeholder="${a||""}" value="${h||""}" ${s?"required":""} ${l?"disabled":""} autocomplete="${e}"/></div>`}L(t){const{required:e,id:i,label:s,name:n,placeholder:o,value:r,disabled:a}=t,h=i||j();return`<label class="item-label ${e?"is-required":""}" for="${h}">${s}</label><div class="form-control"><textarea class="j-textarea" name="${n}" id="${h}" placeholder="${o||""}" ${e?"required":""} ${a?"disabled":""}>${r||""}</textarea></div>`}I(t){let e="";const{options:i,required:s,id:n,label:o,name:r,disabled:a}=t,h=n||j();if(i)for(const l of i)e+=`<option value="${l.value}" ${l.selected?"selected":""} ${l.disabled?"disabled":""}>${l.text}</option>`;return`<label class="item-label ${s?"is-required":""}" for="${h}">${o}</label><div class="form-control"><select class="j-select" name="${r}" id="${h}" autocomplete="off" ${s?"required":""} ${a?"disabled":""}>${e}</select></div>`}p(t){const{title:e,content:i,position:s,confirmText:n,cancelText:o,showCancel:r,showClose:a,fullscreen:h,header:l,footer:c,escClose:d,bgClose:u,style:m,id:f,onShow:p,onShown:w,onHide:v,onHidden:g,onConfirm:y,onSubmit:x,fields:$,lazy:k}=t;b("title",e,"string"),b("content",i,["string","HTMLElement"]),b("position",s,"string"),b("confirmText",n,"string"),b("cancelText",o,"string"),b("showCancel",r,"boolean"),b("showClose",a,"boolean"),b("fullscreen",h,"boolean"),b("header",l,"boolean"),b("footer",c,"boolean"),b("escClose",d,"boolean"),b("bgClose",u,"boolean"),b("style",m,["string","null"]),b("id",f,["string","null"]),b("onShow",p,["function","null"]),b("onShown",w,["function","null"]),b("onHide",v,["function","null"]),b("onHidden",g,["function","null"]),b("onConfirm",y,["function","null"]),b("onSubmit",x,["function","null"]),b("fields",$,["array","null"]),b("lazy",k,"boolean"),f&&f.trim()||(this.options.id=j())}O(t){if(!(t instanceof Element))return;const e=P(".modal-close",t);e&&(e.style.width=`${e.clientHeight}px`,e.style.transform=`translateX(${e.clientHeight/3}px)`)}F(t,e){this.P(t,e),this.q(t,e),this.R(e)}P(t,e){t&&e.bgClose&&(this.v.bg=e=>{e.target===t&&this.hide()},O(t,"click",this.v.bg))}q(t,e){t&&e.escClose&&(this.v.esc=t=>{"Escape"===t.key&&this.isVisible&&this.hide()},O(document,"keydown",this.v.esc))}R(t){this.v.inside=e=>{const i=e.target.dataset.action;"confirm"===i||"submit"===i?this.B(t):("cancel"===i||"close"===i||e.target.classList.contains("modal-close"))&&this.hide()},this.modal.addEventListener("click",this.v.inside)}B(t){if(this.form&&t.fields.length>0){this.form.dispatchEvent(new Event("submit"));const e=new FormData(this.form),i={};for(const[t,s]of e.entries())i[t]=s;this.fields=i,null!==this.$&&"object"==typeof this.$&&this.fields&&(this.fields=Object.assign(this.fields,this.$)),this.V(t,this.fields)}else this.Z(t)}U(){this.form&&this._&&(P(".modal-form-container",this.modal).innerHTML=this.A({fields:this._}).outerHTML)}async Z(t){t.onConfirm&&await Promise.resolve(t.onConfirm()),this.hide()}async V(t,e){t.onSubmit&&(await Promise.resolve(this.options.onSubmit(e)),this.$=null)}J(){const t=[{k:"esc",t:document,e:"keydown"},{k:"bg",t:this.root,e:"click"},{k:"inside",t:this.modal,e:"click"}];for(const{k:e,t:i,e:s}of t)this.v[e]&&(F(i,s,this.v[e]),delete this.v[e])}show(){if(!t.instances.has(this))throw new Error("Modal: The current instance has been destroyed.");if(this.isVisible)return;const{lazy:e,onShow:i,onShown:s}=this.options;e&&!this.root&&this.C(this.options),i&&i(),document.body.appendChild(this.root),document.body.style.overflow="hidden",this.O(this.modal),this.isVisible=!0,this.F(this.root,this.options);const n=P('input, select, textarea, [tabindex]:not([tabindex="-1"])',this.modal);n&&n.focus(),s&&s()}hide(){if(!this.isVisible||!this.root)return;const{onHide:t,onHidden:e}=this.options;t&&t();this.modal.style.transition="opacity 0.3s ease, transform 0.3s ease",this.modal.style.opacity="0",this.modal.style.transform="scale(0)",this.isVisible=!1,this.$=null,this.fields=null,this.U(),setTimeout(()=>{this.root.parentNode.removeChild(this.root),document.body.style.overflow="",this.modal.style.cssText="",this.J(),e&&e()},300)}setFields(t){if(this.form)for(const e of Object.keys(t)){const i=P(`[name="${e}"]`,this.form);i&&("checkbox"===i.type||"radio"===i.type?i.checked=t[e]:i.value=t[e])}}addFields(t){if("object"!=typeof t)throw new Error("Modal: The data expects an object");this.$=t}setContent(t){if(!this.modal)return;if(this.options.fields)throw new Error("Modal.setContent: Cannot setContent when fields are defined.");const e=P(".modal-body",this.modal);e&&("string"==typeof t?e.innerHTML=t:t instanceof HTMLElement&&(e.innerHTML="",e.appendChild(t)),this.options.content=t)}showLoading(){if(P(".j-loading",this.modal))return;const t=R("div",{className:"j-loading is-active",html:'<div class="loading-spinner"></div>'});this.modal.insertAdjacentHTML("beforeend",t.outerHTML),this.confirmBtn&&(this.confirmBtn.disabled=!0),this.cancelBtn&&(this.cancelBtn.disabled=!0)}hideLoading(){const t=P(".j-loading",this.modal);t&&(t.parentNode&&t.parentNode.removeChild(t),this.confirmBtn&&(this.confirmBtn.disabled=!1),this.cancelBtn&&(this.cancelBtn.disabled=!1))}destroy(){this.isVisible?this.hide():this.root&&this.root.parentNode&&(this.root.parentNode.removeChild(this.root),document.body.style.overflow="",this.modal.style.cssText=""),this.J(),this.root=null,this.fields=null,this.$=null,this.v={},this.options=null,this.isVisible=null,t.instances.delete(this)}static destroyAll(){for(const e of Array.from(t.instances))e.destroy();t.instances.clear()}};e(it,"instances",/* @__PURE__ */new Set);let st=it;class nt{X(){}static show(t="",e=3e3,i="info"){nt.Y(t,e,i);let s=document.querySelector(".j-toast-container");s||(s=R("div",{className:"j-toast-container"}),document.body.appendChild(s));const n=nt.G(i),o=R("div",{className:`j-toast is-${i}`,attrs:{"data-toast":j()},html:`<span class="toast-icon">${n}</span>\n        <span class="toast-message">${t}</span>`});return s.appendChild(o),setTimeout(()=>{o.classList.add("toast-show")},10),e>0&&setTimeout(()=>{nt.hide(o)},e),O(o,"click",()=>{nt.hide(o)}),o}static success(t="",e=3e3){return nt.show(t,e,"success")}static info(t="",e=3e3){return nt.show(t,e,"info")}static warning(t="",e=3e3){return nt.show(t,e,"warning")}static error(t="",e=3e3){return nt.show(t,e,"error")}static hide(t){t&&(t.classList.remove("toast-show"),t.classList.add("toast-hide"),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t);const e=document.querySelector(".j-toast-container");e&&0===e.children.length&&e.parentNode.removeChild(e)},300))}static lite(t="",e=2e3){if("string"!=typeof t)throw new Error("Lite toast message expects a string");if("number"!=typeof e||e<=0)throw new Error("Lite toast duration expects a number greater than 0");const i=document.querySelector(".j-toast-lite");i&&i.remove();const s=R("div",{className:"j-toast-lite",text:t});return document.body.appendChild(s),setTimeout(()=>s.classList.add("is-show"),10),setTimeout(()=>{s.classList.remove("is-show"),s.classList.add("is-hide"),setTimeout(()=>s.remove(),300)},e),s}static Y(t,e,i){if("string"!=typeof t)throw new Error("Toast message expects a string");if("number"!=typeof e||e<=0)throw new Error("Toast duration expects a positive number or 0.");if(!["info","success","warning","error"].includes(i))throw new Error("Toast type expects one of [info, success, warning, error]")}static G(t){const e={success:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12ZM12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM17.4571 9.45711L16.0429 8.04289L11 13.0858L8.20711 10.2929L6.79289 11.7071L11 15.9142L17.4571 9.45711Z"></path></svg>',error:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM12 10.5858L14.8284 7.75736L16.2426 9.17157L13.4142 12L16.2426 14.8284L14.8284 16.2426L12 13.4142L9.17157 16.2426L7.75736 14.8284L10.5858 12L7.75736 9.17157L9.17157 7.75736L12 10.5858Z"></path></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 15H13V17H11V15ZM11 7H13V13H11V7Z"></path></svg>',info:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 22C6.47715 22 2 17.5228 2 12 2 6.47715 6.47715 2 12 2 17.5228 2 22 6.47715 22 12 22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12 20 7.58172 16.4183 4 12 4 7.58172 4 4 7.58172 4 12 4 16.4183 7.58172 20 12 20ZM13 10.5V15H14V17H10V15H11V12.5H10V10.5H13ZM13.5 8C13.5 8.82843 12.8284 9.5 12 9.5 11.1716 9.5 10.5 8.82843 10.5 8 10.5 7.17157 11.1716 6.5 12 6.5 12.8284 6.5 13.5 7.17157 13.5 8Z"></path></svg>'};return e[t]||e.info}}const ot=class t{constructor(t){this.options=Object.assign({content:"",overlay:!0,filter:!0,direction:"left",animation:"slide",bgClose:!0,escClose:!0,id:null,onShow:null,onShown:null,onHide:null,onHidden:null},t),this.W(this.options),this.u(this.options)}W(t){const{content:e,overlay:i,filter:s,direction:n,animation:o,bgClose:r,escClose:a,id:h,onShow:l,onShown:c,onHide:d,onHidden:u}=t;b("content",e,["string","HTMLElement"]),b("overlay",i,"boolean"),b("filter",s,"boolean"),b("direction",n,"string",[{test:t=>["top","right","bottom","left"].includes(t),message:"expects one of [top, right, bottom, left]"}]),b("animation",o,"string",[{test:t=>["slide","push","none"].includes(t),message:"expects one of [slide, push, none]"}]),b("bgClose",r,"boolean"),b("escClose",a,"boolean"),b("id",h,["string","null"]),b("onShow",l,["function","null"]),b("onShown",c,["function","null"]),b("onHide",d,["function","null"]),b("onHidden",u,["function","null"]),h&&h.trim()||(this.options.id=j())}u(t){this.isVisible=!1,t.overlay&&(this.K=this.tt(t)),this.root=this.C(t),this.v={}}et(t){"Escape"===t.key&&this.isVisible&&this.hide()}F(){const{bgClose:t,escClose:e}=this.options;this.v={overlay:this.hide.bind(this),esc:t=>this.et(t),close:t=>{const e=t.target.dataset.action;"close"!==e&&"cancel"!==e||this.hide()}},this.K&&t&&O(this.K,"click",this.v.overlay),e&&O(document,"keydown",this.v.esc),O(this.root,"click",this.v.close)}it(){this.K&&this.v.overlay&&(F(this.K,"click",this.v.overlay),delete this.v.overlay),this.v.esc&&(F(document,"keydown",this.v.esc),delete this.v.esc),this.v.close&&(F(this.root,"click",this.v.close),delete this.v.close)}tt(t){const e=t.filter,i=e?"backdropFilter":"",s=e?"blur(2px)":"";return R("div",{className:"j-offcanvas-overlay",style:{[i]:s}})}C(t){const{id:e,direction:i,animation:s,content:n}=t;return R("div",{className:`j-offcanvas ${i?`is-${i}`:""} ${s?`is-${s}`:""}`,id:e,children:R("div",{className:"offcanvas-content",children:n})})}st(){const{overlay:t,animation:e,direction:i}=this.options;if(t&&document.body.appendChild(this.K),document.body.appendChild(this.root),document.body.style.overflow="hidden","push"===e){document.body.classList.add("offcanvas-push-body");const t=window.scrollY;this.K.style.top=`${t}px`,this.root.style.top=`${t}px`}setTimeout(()=>{this.K&&this.K.classList.add("is-active"),"push"===e&&document.body.classList.add(`offcanvas-push-${i}`),this.root.classList.add("is-active")},10)}nt(){const{animation:t,direction:e}=this.options;this.K&&this.K.classList.remove("is-active"),this.root.classList.remove("is-active"),"push"===t&&document.body.classList.remove(`offcanvas-push-${e}`),setTimeout(()=>{this.K&&this.K.parentNode&&this.K.parentNode.removeChild(this.K),this.root&&this.root.parentNode&&this.root.parentNode.removeChild(this.root),"push"===t&&document.body.classList.remove("offcanvas-push-body"),document.body.style.overflow=""},100)}async show(){const{onShow:t,onShown:e}=this.options;this.isVisible||(t&&await Promise.resolve(t()),this.st(),this.F(),this.isVisible=!0,setTimeout(()=>{e&&e()},100))}async hide(){const{onHide:t,onHidden:e}=this.options;this.isVisible&&(t&&await Promise.resolve(t()),this.it(),this.nt(),this.isVisible=!1,e&&e())}destroy(){this.hide(),this.options=null,this.root=null,this.v={},t.instances.delete(this)}static destroyAll(){for(const e of Array.from(t.instances))e.destroy();t.instances.clear()}};e(ot,"instances",/* @__PURE__ */new Set);let rt=ot;const at=class t{constructor(t={}){this.options=Object.assign({mode:"dark",render:"dark",theme:"indigo",radius:"sm",shadow:"sm",font:"sm",key:"jui-theme"},t),this.languages={en:{b:"Back",t:"Customize",d:"Customize your UI experience.",theme:"Theme",radius:"Radius",shadow:"Shadow",font:"Font",mode:"Mode",gray:"Gray",olive:"Olive",tomato:"Tomato",ruby:"Ruby",pink:"Pink",violet:"Violet",indigo:"Indigo",blue:"Blue",teal:"Teal",grass:"Grass",mint:"Mint",lime:"Lime",yellow:"Yellow",orange:"Orange",gold:"Gold",n:"None",sm:"Small",md:"Medium",lg:"Large",xl:"XL",light:"Light",dark:"Dark",auto:"Auto"},zh:{b:"返回",t:"自定义主题",d:"自定义您的UI体验。",theme:"主题",radius:"圆角",shadow:"阴影",font:"字体",mode:"模式",gray:"灰色",olive:"橄榄绿",tomato:"番茄红",ruby:"红宝石",pink:"粉红",violet:"紫罗兰",indigo:"靛蓝",blue:"蓝色",teal:"青色",grass:"草绿",mint:"薄荷绿",lime:"酸橙绿",yellow:"黄色",orange:"橙色",gold:"金色",n:"无",sm:"小",md:"中",lg:"大",xl:"更大",light:"浅色",dark:"深色",auto:"自动"}},this.u()}u(){this.v={},this.mq=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)"),this.ot(),this.rt(this.options),this.ht(),this.lt(document)}ct(t){return C(t,this.languages)}ot(){try{const t=localStorage.getItem(this.options.key);if(t){const e=JSON.parse(t);this.options=Object.assign({},this.options,e)}}catch(t){}}dt(t){const e=this.mq&&this.mq.matches?"dark":"light";this.options.render="auto"===this.options.mode?e:this.options.mode;const i=JSON.stringify(t);localStorage.setItem(this.options.key,i)}ut(){const t=[],e=document.documentElement;for(const i of e.classList)"light"!==i&&"dark"!==i||t.push(i),(i.startsWith("j-theme-")||i.startsWith("j-radius-")||i.startsWith("j-shadow-")||i.startsWith("j-font-"))&&t.push(i);t.length&&e.classList.remove(...t)}ft(){const t=document.documentElement,{mode:e}=this.options;if("auto"===e){const e=this.mq&&this.mq.matches?"dark":"light";t.classList.remove("light","dark"),t.classList.add(e)}else t.classList.remove("light","dark"),t.classList.add("dark"===e?"dark":"light")}rt(t){this.ut(),this.ft();document.documentElement.classList.add(`j-theme-${t.theme}`,`j-radius-${t.radius}`,`j-shadow-${t.shadow}`,`j-font-${t.font}`)}lt(t=document){const e=t.querySelectorAll(".palette-item");for(const i of e){const t=i.dataset.palette,e=this.options[t],s=i.querySelectorAll("button[data-palette]");for(const i of s){const t=i.dataset.palette===(void 0===e?null:e);i.classList.toggle("is-active",t)}}}ht(){this.v.click=t=>{const e=t.target.closest(".palette-item .items > button[data-palette]");if(!e)return;const i=e.closest(".palette-item");if(!i)return;const s=i.dataset.palette,n=e.dataset.palette;e.classList.contains("is-active")||(this.options[s]=n,this.rt(this.options),this.dt(this.options),this.lt())},O(document.body,"click",this.v.click)}bt(){F(document.body,"click",this.v.click)}createPanel(t="j-theme-palette",e=null){const i=e||[{title:this.ct("theme"),type:"theme",buttons:[["gray",this.ct("gray")],["olive",this.ct("olive")],["tomato",this.ct("tomato")],["ruby",this.ct("ruby")],["pink",this.ct("pink")],["violet",this.ct("violet")],["indigo",this.ct("indigo")],["blue",this.ct("blue")],["teal",this.ct("teal")],["grass",this.ct("grass")],["mint",this.ct("mint")],["lime",this.ct("lime")],["yellow",this.ct("yellow")],["orange",this.ct("orange")],["gold",this.ct("gold")]]},{title:this.ct("radius"),type:"radius",buttons:[["none",this.ct("n")],["sm",this.ct("sm")],["md",this.ct("md")],["lg",this.ct("lg")],["xl",this.ct("xl")]]},{title:this.ct("shadow"),type:"shadow",buttons:[["none",this.ct("n")],["sm",this.ct("sm")],["md",this.ct("md")],["lg",this.ct("lg")]]},{title:this.ct("font"),type:"font",buttons:[["sm",this.ct("sm")],["md",this.ct("md")]]},{title:this.ct("mode"),type:"mode",buttons:[["light",this.ct("light")],["dark",this.ct("dark")],["auto",this.ct("auto")]]}],s=[],n=`<div class="text-center"><button class="j-button is-text" data-action="close">${this.ct("b")}</button></div><h3>${this.ct("t")}</h3><p class="mt-0 text-sm">${this.ct("d")}</p><div class="palette-container">`;s.push(n);for(const o of i){s.push(`<div class="palette-item" data-palette="${o.type}"><div class="item-title">${o.title}</div><div class="items">`);for(const[t,e]of o.buttons){const i=String(this.options[o.type])===String(t)?" is-active":"",n="theme"===o.type?`<span class="el-prefix item-hex bg-${t}-10"></span>`:"";s.push(`<button class="j-button is-default${i}" data-palette="${t}">${n}<span class="button-text">${e}</span></button>`)}s.push("</div></div>")}s.push("</div>");return R("div",{className:t,html:s.join("")})}setConfig(t){this.options=Object.assign({},this.options,t),this.rt(this.options),this.dt(this.options),this.lt(document)}destroy(){this.bt(),this.options={},this.languages={},this.v={},this.mq=null,t.instances.delete(this)}static destroyAll(){for(const e of Array.from(t.instances))e.destroy();t.instances.clear()}};e(at,"instances",/* @__PURE__ */new Set);let ht=at;const lt=class t{constructor(t,e={}){if(!1!==t&&!(t instanceof HTMLElement))throw new Error("Element expects a valid HTMLElement or false.");this.options=Object.assign({id:null,direction:"top",active:0,disabled:[],onChange:null,tabs:[],onAdd:null,onRemove:null},e),this.p(this.options),this.u(t)}u(t){this.root=t,this.current=null,this.v={},this.wt=[];const{tabs:e,disabled:i,active:s}=this.options;if(!1===this.root&&(this.root=this.C(e)),0===this.tabs.length||0===this.panels.length)throw new Error(".tab-item or .panel-item not found.");this.wt=this.vt(i),this.gt(),this.F(),this.yt(s,!1),this.xt()}get tabs(){return this.root?Array.from(this.root.querySelectorAll(".tab-item")):[]}get panels(){return this.root?Array.from(this.root.querySelectorAll(".panel-item")):[]}get $t(){return this.root?this.root.querySelector(".tab-wrap"):null}get kt(){return this.root?this.root.querySelector(".tab-list"):null}p(t){const{id:e,direction:i,active:s,disabled:n,onChange:o,tabs:r,onAdd:a,onRemove:h}=t;b("id",e,["string","null"]),b("direction",i,"string",[{test:t=>["top","bottom","left","right"].includes(t),message:"direction expects one of [top, bottom, left, right]"}]),b("active",s,["number","string"]),b("disabled",n,["number","string","array"]),b("tabs",r,["array"]),b("onChange",o,["function","null"]),b("onAdd",a,["function","null"]),b("onRemove",h,["function","null"]),e&&e.trim()||(this.options.id=j())}C(t){const{id:e,direction:i}=this.options,s=R("nav",{className:"tab-list"}),n=R("div",{className:"tab-wrap",children:s}),o=R("div",{className:"tab-panel"});for(const r of t){const t=R("div",{className:"tab-item",attrs:{"data-tab":r.name||j()},html:`<span>${r.title}</span>`});s.appendChild(t);const e=R("div",{className:"panel-item",html:`<div>${r.content}</div>`});o.appendChild(e)}return R("div",{className:"j-tabs",id:e,direction:`is-${i}`,children:[n,o]})}vt(t){if(null==t)return[];const e=t=>"number"==typeof t?t:"string"==typeof t?this.tabs.findIndex(e=>e.dataset.tab===t):-1;if(Array.isArray(t))return t.map(e).filter(t=>t>=0);{const i=e(t);return i>=0?[i]:[]}}gt(){for(const[t,e]of this.tabs.entries())this.wt.includes(t)?(e.setAttribute("disabled","true"),e.classList.add("is-disabled")):(e.removeAttribute("disabled"),e.classList.remove("is-disabled"))}F(){this.it(),this.kt&&(this.v.tabClick=t=>{const e=t.target.closest(".tab-item");if(!e||!this.tabs.includes(e))return;const i=this.tabs.indexOf(e);i>=0&&!this.wt.includes(i)&&this.activate(i)},O(this.kt,"click",this.v.tabClick))}it(){this.kt&&this.v.tabClick&&F(this.kt,"click",this.v.tabClick),this.v.tabClick=null}async yt(t,e=!0){const{onChange:i}=this.options,s=this._t(t);if(!(s<0||s>=this.tabs.length||this.wt.includes(s)||this.current===s)){this.current=s;for(const[t,e]of this.tabs.entries())e.classList.toggle("is-active",t===s);for(const[t,e]of this.panels.entries())e.classList.toggle("is-active",t===s);if(e&&i){const t=this.tabs[s],e=this.panels[s],n=t&&t.dataset.tab||s;await Promise.resolve(i(s,n,t,e))}}}_t(t){return"number"==typeof t?t:"string"==typeof t?this.tabs.findIndex(e=>e.dataset.tab===t):-1}xt(){const{direction:t}=this.options;this.$t&&this.kt&&(this.isVertical="left"===t||"right"===t,this.draggable=this.Et(),this.draggable?(this.Ct(),this.v.resize=()=>{cancelAnimationFrame(this.Tt),this.Tt=requestAnimationFrame(()=>{this.jt()})},O(window,"resize",this.v.resize)):this.St())}Et(){if(this.isVertical){return this.kt.scrollHeight>this.$t.clientHeight+5}return this.kt.scrollWidth>this.$t.clientWidth+5}Ct(){this.St();const t=this.$t,e=this.kt,i=this.isVertical;let s=0,n=0,o=0,r=!1;const a=t=>i?t.touches?t.touches[0].pageY:t.pageY:t.touches?t.touches[0].pageX:t.pageX,h=r=>{this.isDragging=!0,e.classList.add("dragging"),s=a(r),o=s,n=i?t.scrollTop:t.scrollLeft,this.Mt=0,cancelAnimationFrame(this.raf)},l=e=>{if(!this.isDragging)return;e.preventDefault();const h=a(e),l=s-h;this.Mt=o-h,o=h,r||(r=!0,requestAnimationFrame(()=>{r=!1,i?t.scrollTop=n+l:t.scrollLeft=n+l}))},c=()=>{this.isDragging&&(this.isDragging=!1,e.classList.remove("dragging"),this.At())};this.v.drag={onDragStart:h,onDragMove:l,onDragEnd:c},O(e,"mousedown",h),O(e,"touchstart",h,{passive:!0}),O(window,"mousemove",l,{passive:!1}),O(window,"touchmove",l,{passive:!1}),O(window,"mouseup",c),O(window,"touchend",c)}At(){const t=this.$t;let e=this.Mt;const i=this.isVertical;let s=performance.now();const n=o=>{const r=o-s;s=o,e*=.92,Math.abs(e)<.3||(i?t.scrollTop+=e*r*.05:t.scrollLeft+=e*r*.05,this.raf=requestAnimationFrame(n))};this.raf=requestAnimationFrame(n)}St(){if(!this.v.drag)return;const{onDragStart:t,onDragMove:e,onDragEnd:i}=this.v.drag;F(this.kt,"mousedown",t),F(this.kt,"touchstart",t),F(window,"mousemove",e),F(window,"touchmove",e),F(window,"mouseup",i),F(window,"touchend",i),this.v.drag=null}jt(){this.xt()}async activate(t){await this.yt(t,!0)}async reInit(t={}){this.options=Object.assign({},this.options,t);const{disabled:e,active:i}=this.options;this.wt=this.vt(e),this.gt(),this.F(),await this.yt(i,!1),this.jt()}async addTab(t){const{title:e,name:i,content:s}=t;if(!t||!e)return;const n=this.root.querySelector(".tab-panel");t.name=i||j();const o=R("div",{className:"tab-item",attrs:{"data-tab":t.name},html:`<span>${e}</span>`});this.kt&&this.kt.appendChild(o);const r=R("div",{className:"panel-item",html:`<div>${s}</div>`});n.appendChild(r),this.gt(),this.F();const{onAdd:a}=this.options;a&&await Promise.resolve(a(this.tabs.length-1,t,o,r)),this.jt()}async deleteTab(t){if(this.tabs.length<=1)return;const e=this._t(t);if(e<0||e>=this.tabs.length)return;const i=this.tabs[e],s=this.panels[e],n=i.dataset.tab||e;i&&i.parentNode&&i.parentNode.removeChild(i),s&&s.parentNode&&s.parentNode.removeChild(s),this.gt(),this.F();const{onRemove:o}=this.options;o&&await Promise.resolve(o(e,n)),i.classList.contains("is-active")&&await this.yt(this.tabs.length-1,!1),this.jt()}disableTab(t){const e=this._t(t);e>=0&&!this.wt.includes(e)&&(this.wt.push(e),this.gt(),this.F())}enableTab(t){const e=this._t(t),i=this.wt.indexOf(e);i>=0&&(this.wt.splice(i,1),this.gt(),this.F())}destroy(){this.it();for(const t of this.tabs)t.classList.remove("is-active","is-disabled"),t.removeAttribute("disabled");for(const t of this.panels)t.classList.remove("is-active");const e=this.kt;e&&(F(e.inner,"mousedown",this.Nt),F(e.inner,"touchstart",this.Nt),F(e.inner,"mousemove",this.Ht),F(e.inner,"touchmove",this.Ht),F(window,"mouseup",this.Lt),F(window,"touchend",this.Lt)),this.v.resize&&F(window,"resize",this.v.resize),this.root=null,this.options={},this.isVertical=!1,this.v={},t.instances.delete(this)}static destroyAll(){for(const e of Array.from(t.instances))e.destroy();t.instances.clear()}};e(lt,"instances",/* @__PURE__ */new Set);let ct=lt;const dt=class t{constructor(e,i={}){if(!1!==e&&!(e instanceof HTMLElement))throw new Error("Accordion: element expects a valid HTMLElement or false.");this.options=Object.assign({id:null,active:0,collapsible:!1,multiple:!1,onChange:null,items:[]},i),this.p(this.options),this.u(e,this.options),t.instances.add(this)}p(t){const{id:e,active:i,collapsible:s,multiple:n,onChange:o,items:r}=t;b("id",e,["string","null"]),b("active",i,["number","string"]),b("collapsible",s,"boolean"),b("multiple",n,"boolean"),b("onChange",o,["function","null"]),b("items",r,"array"),e&&e.trim()||(this.options.id=j())}u(t,e){if(this.root=t,this.v={},!1===this.root&&(this.root=this.C(e)),0===this.headers.length||0===this.panels.length)throw new Error("Accordion: .accordion-header or .accordion-panel not found.");this.F(),null!=e.active&&this.yt(e.active,!1)}C(t){return R("div",{className:"j-accordion",id:t.id,children:this.It(t.items)})}It(t){if(!Array.isArray(t)||0===t.length)throw new Error("Accordion: items must be a non-empty array.");const e=document.createDocumentFragment();for(const i of t){if(i.name&&"string"!=typeof i.name)throw new Error("Accordion: item name expects a string.");const t=R("div",{className:"accordion-header",attrs:{"data-item":i.name||j()},html:`<span class="header-title">${i.title}</span><span class="header-arrow"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></span>`}),s=R("div",{className:"accordion-panel"}),n=R("div",{className:"panel-content",children:i.content});s.appendChild(n),e.appendChild(t),e.appendChild(s)}return e}F(){this.it();const t=t=>{const e=t.target.closest(".accordion-header");e&&this.headers.includes(e)&&this.active(this.headers.indexOf(e))};O(this.root,"click",t),this.v.root=t}it(){const t=[{k:"root",t:this.root,e:"click"}];for(const{k:e,t:i,e:s}of t)this.v[e]&&(F(i,s,this.v[e]),delete this.v[e])}async yt(t,e=!0){const i=this._t(t);if(i<0||i>=this.headers.length)return;const s=this.headers[i],n=this.panels[i],o=s&&s.dataset.item||i,r=s.classList.contains("is-active");if(!r||this.options.multiple||this.options.collapsible){if(this.options.multiple)r?(s.classList.remove("is-active"),n.classList.remove("is-active")):(s.classList.add("is-active"),n.classList.add("is-active"));else if(r)this.options.collapsible&&(s.classList.remove("is-active"),n.classList.remove("is-active"));else{for(const t of this.headers)t.classList.remove("is-active");for(const t of this.panels)t.classList.remove("is-active");s.classList.add("is-active"),n.classList.add("is-active")}e&&this.options.onChange&&await Promise.resolve(this.options.onChange(i,o,s,n))}}_t(t){return"number"==typeof t?t:"string"==typeof t?this.headers.findIndex(e=>e.dataset.item===t):-1}get headers(){return this.root?Array.from(this.root.querySelectorAll(".accordion-header")):[]}get panels(){return this.root?Array.from(this.root.querySelectorAll(".accordion-panel")):[]}get current(){const t=this.headers.find(t=>t.classList.contains("is-active"));return t?this.headers.indexOf(t):null}async active(t){return this.yt(t,!0),Promise.resolve()}setItems(t,e=0){if(!Array.isArray(t)||0===t.length)throw new Error("Accordion.setItems: items expects a non-empty array.");if("number"!=typeof e&&e<0)throw new Error("Accordion.setItems: active expects a positive number or 0.");this.options.items=[...t],this.options.active=e,this.it(),this.root.innerHTML="",this.root.append(this.It(t)),this.F(),this.yt(this.options.active)}destroy(){this.it();for(const t of this.headers)t.classList.remove("is-active");for(const t of this.panels)t.classList.remove("is-active");this.root=null,this.options={},this.Dt={},t.instances.delete(this)}destroyAll(){for(const e of Array.from(t.instances))e.destroy();t.instances.clear()}};e(dt,"instances",/* @__PURE__ */new Set);let ut=dt;const mt=class t{constructor(t,e={}){if(!(t instanceof HTMLElement))throw new Error("Drop: element expects a valid HTMLElement.");this.target=t,this.options=Object.assign({name:null,mode:"click",position:"auto",offset:10,content:"",className:null,id:null,delay:0,hoverIntent:!0},e),this.p(this.options),this.u(this.options)}p(t){b("name",t.name,["string","null"]),b("mode",t.mode,["string"]),b("position",t.position,["string"],[{test:t=>["auto","top-left","top-center","top-right","bottom-left","bottom-center","bottom-right","left","right"].includes(t),message:"expects one of [auto, top-left, top-center, top-right, bottom-left, bottom-center, bottom-right, left, right]"}]),b("offset",t.offset,"number",[{test:t=>t>=0,message:"offset expects a positive number or 0."}]),b("content",t.content,["string","HTMLElement"]),b("className",t.className,["string","null"]),b("id",t.id,["string","null"]),b("delay",t.delay,["number","object"]),b("hoverIntent",t.hoverIntent,"boolean"),t.id&&t.id.trim()||(this.options.id=j())}u(t){this.isVisible=!1,this.root=null,this.v={},this.Ot={show:null,hide:null},this.Ft={x:0,y:0,lastMoveTime:0};const{delay:e}=t;"number"==typeof e&&e>=0?(this.delayShow=e,this.delayHide=e):"object"==typeof e&&null!==e?(this.delayShow=Number(e.show)||0,this.delayHide=Number(e.hide)||0):(this.delayShow=0,this.delayHide=0),this.v={show:this.show.bind(this),hide:this.hide.bind(this),toggle:this.toggle.bind(this),mouseMove:this.Pt.bind(this),docClick:this.qt.bind(this),startIntent:this.Rt.bind(this),cancelIntent:this.zt.bind(this)},this.Bt(t),this.F(t)}Bt(t){const{className:e,content:i,id:s,name:n}=t,o=e||"",r=i instanceof HTMLElement?i:R("div",{className:"drop-container",html:i}),a=R("div",{className:o?`j-drop ${o}`:"j-drop",id:s,attrs:{"data-drop":n||j()},children:r});this.root=a,document.body.appendChild(a)}F(t){const{mode:e,hoverIntent:i}=t;"hover"===e?(i?(O(this.target,"mouseenter",this.v.startIntent),O(this.target,"mouseleave",this.v.cancelIntent)):(O(this.target,"mouseenter",this.v.show),O(this.target,"mouseleave",this.v.hide)),O(this.root,"mouseenter",this.v.show),O(this.root,"mouseleave",this.v.hide)):"click"===e&&(O(this.target,"click",this.v.toggle),O(document,"click",this.v.docClick))}it(){const{mode:t,hoverIntent:e}=this.options;"hover"===t?(e?(F(this.target,"mouseenter",this.v.startIntent),F(this.target,"mouseleave",this.v.cancelIntent)):(F(this.target,"mouseenter",this.v.show),F(this.target,"mouseleave",this.v.hide)),F(this.root,"mouseenter",this.v.show),F(this.root,"mouseleave",this.v.hide)):"click"===t&&(F(this.target,"click",this.v.toggle),F(document,"click",this.v.docClick)),F(document,"mousemove",this.v.mouseMove)}Rt(){O(document,"mousemove",this.v.mouseMove),clearTimeout(this.Ot.show),this.Ot.show=setTimeout(()=>{const t=Date.now()-this.Ft.lastMoveTime;Math.abs(this.Ft.x-this.Vt||0)+Math.abs(this.Ft.y-this.Zt||0)<5||t>100?(this.show(),F(document,"mousemove",this.v.mouseMove)):this.Rt()},this.delayShow)}zt(){clearTimeout(this.Ot.show),F(document,"mousemove",this.v.mouseMove),this.hide()}Pt(t){this.Vt=t.clientX,this.Zt=t.clientY,this.Ft.lastMoveTime=Date.now(),this.Ft.x=t.clientX,this.Ft.y=t.clientY}Ut(){const t=this.target.getBoundingClientRect(),e=this.root,{offset:i,position:s}=this.options;e.style.visibility="hidden",e.style.display="block";const n=e.getBoundingClientRect();let o=0,r=0,a=s;if("auto"===a){a=window.innerHeight-t.bottom>n.height+i?"top-center":"bottom-center"}switch(a){case"top-left":o=t.top-n.height-i,r=t.left;break;case"top-center":o=t.top-n.height-i,r=t.left+t.width/2-n.width/2;break;case"top-right":o=t.top-n.height-i,r=t.right-n.width;break;case"bottom-left":o=t.bottom+i,r=t.left;break;case"bottom-center":o=t.bottom+i,r=t.left+t.width/2-n.width/2;break;case"bottom-right":o=t.bottom+i,r=t.right-n.width;break;case"left":o=t.top+t.height/2-n.height/2,r=t.left-n.width-i;break;case"right":o=t.top+t.height/2-n.height/2,r=t.right+i}o=Math.max(8,Math.min(o,window.innerHeight-n.height-8)),r=Math.max(8,Math.min(r,window.innerWidth-n.width-8)),e.style.top=`${o+window.scrollY}px`,e.style.left=`${r+window.scrollX}px`,e.style.visibility="",e.style.display=""}qt(t){this.root.contains(t.target)||this.target.contains(t.target)||this.hide()}Jt(t){t?this.Ut():(this.root.style.top="",this.root.style.left=""),this.root.classList.toggle("is-active",t),this.isVisible=t}show(t=!0){clearTimeout(this.Ot.hide),this.isVisible||(t&&this.delayShow>0?(clearTimeout(this.Ot.show),this.Ot.show=setTimeout(this.Jt(!0),this.delayShow)):this.Jt(!0))}hide(t=!0){clearTimeout(this.Ot.show),this.isVisible&&(t&&this.delayHide>0?(clearTimeout(this.Ot.hide),this.Ot.hide=setTimeout(this.Jt(!1),this.delayHide)):this.Jt(!1))}toggle(){this.isVisible?this.hide():this.show()}destroy(){var e;clearTimeout(this.Ot.show),clearTimeout(this.Ot.hide),this.hide(!1),this.it(),(null==(e=this.root)?void 0:e.parentNode)&&this.root.parentNode.removeChild(this.root),this.options=null,this.root=null,this.target=null,t.instances.delete(this)}static destroyAll(){for(const e of Array.from(t.instances))e.destroy();t.instances.clear()}};e(mt,"instances",/* @__PURE__ */new Set);let ft=mt;const pt=class t{constructor(t,e={}){if(!(t instanceof HTMLElement))throw new Error("Tooltip: element expects a valid HTMLElement.");const i=Object.assign({name:null,mode:"hover",position:"auto",offset:8,message:"",className:null,id:null,delay:100,hoverIntent:!0},e),s=this.Xt(i);this.drop=new ft(t,{name:i.name,mode:i.mode,position:i.position,offset:i.offset,content:s,className:i.className,id:i.id,delay:i.delay,hoverIntent:i.hoverIntent})}Xt(t){if("string"!=typeof t.message||""===t.message.trim())throw new Error("Tooltip: message expects a string.");const e=R("div",{className:"tooltip-message",text:t.message});return R("div",{className:t.className?`j-tooltip ${t.className}`:"j-tooltip",children:e})}show(t=!0){this.drop.show(t)}hide(t=!0){this.drop.hide(t)}toggle(){this.drop.toggle()}destroy(){this.drop.destroy(),this.drop=null,t.instances.delete(this)}static destroyAll(){for(const e of Array.from(t.instances))e.destroy();t.instances.clear()}};e(pt,"instances",/* @__PURE__ */new Set);let bt=pt;const wt=class t{constructor(t,e={},i=!1){this.options=Object.assign({rules:{},messages:{},onSubmit:null},e),this.p(t,this.options,i),this.u(t),i&&this.F()}p(t,e,i){b("element",t,["HTMLElement","string"]),b("rules",e.rules,"object"),b("messages",e.messages,"object"),b("onSubmit",e.onSubmit,["function","null"]),b("bindEvents",i,"boolean")}u(t){this.root=t,this.valid=!0}F(){O(this.root,"submit",t=>{t.preventDefault(),this.validate()}),O(this.root,"reset",()=>{this.reset()})}validate(){for(const t of this.root.elements){const e=t.name;if(this.options.rules[e]&&(this.valid=this.Yt(t,e),!this.valid))break}return this.valid&&this.options.onSubmit&&this.options.onSubmit(),this.valid}Yt(t,e){const i=this.options.rules[e];if(t.hasAttribute("required")||t.hasAttribute("minlength")||t.hasAttribute("maxlength")||t.hasAttribute("pattern")||t.hasAttribute("min")||t.hasAttribute("max")||t.hasAttribute("step"))return this.valid;for(const s in i){switch(s){case"required":this.valid=this.Gt(t,i[s]);break;case"minLength":this.valid=this.Wt(t,i[s]);break;case"maxLength":this.valid=this.Kt(t,i[s]);break;case"equalTo":this.valid=this.Qt(t,i[s]);break;case"email":this.valid=this.te(t);break;case"checked":this.valid=this.ee(t,i[s]);break;case"noSpace":this.valid=this.ie(t,i[s]);break;case"noChinese":this.valid=!/[\u4e00-\u9fa5]/.test(t.value);break;case"noSpecial":this.valid=!/[@#$%^&*]+/g.test(t.value);break;case"pattern":this.valid=new RegExp(i[s]).test(t.value)}if(!this.valid){this.se(t,e,s);break}this.ne(t)}return this.valid}Gt(t,e){return t.value.trim().length>=1&&!0===e}Wt(t,e){return t.value.length>=e}Kt(t,e){return t.value.length<=e}te(t){return/^([\w-.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(t.value)}Qt(t,e){const i=this.root.elements[e];if(null==i)throw new Error(`Validator: target element "${e}" not found.`);return t.value===i.value}ee(t,e){if("checkbox"!==t.type)throw new Error(`Validator: element expects a checkbox input, but ${t.type} given.`);return t.checked===e}ie(t,e){return!/\s/.test(t.value)||!0!==e}se(t,e,i){t.classList.remove("is-valid"),t.classList.add("is-invalid");const s=this.options.messages[e]&&this.options.messages[e][i];if(s){this.message=s;const e=t.closest(".form-control");let i=P(".help-block",e);i||(i=R("div",{className:"help-block is-invalid",text:s}),e.appendChild(i))}}ne(t){this.message="",t.classList.remove("is-invalid");const e=t.closest(".form-control"),i=P(".help-block",e);i&&e.removeChild(i),t.classList.add("is-valid")}reset(){this.root.reset();for(const e of this.root.elements)e.classList.remove("is-valid"),e.classList.remove("is-invalid");const t=this.root.querySelectorAll(".help-block");for(const e of t)e.remove();this.valid=!0,this.message=""}destroy(){this.reset(),this.root=null,this.options=null,this.message=null,this.valid=null,t.instances.delete(this)}static destroyAll(){for(const e of Array.from(t.instances))e.destroy();t.instances.clear()}};e(wt,"instances",/* @__PURE__ */new Set);let vt=wt;class gt{constructor(t){this.options=Object.assign({ball:{color:"var(--primary, #3e63dd)",size:"10px"},from:null,to:null,direction:"center",showDelay:0,hideDelay:0,onShow:null,onHidden:null},t),this.p(this.options),this.u(this.options)}p(t){const{ball:e,from:i,to:s,direction:n,showDelay:o,hideDelay:r,onShow:a,onHidden:h}=t;b("ball",e,"object",[{test:t=>"object"==typeof t&&2===Object.keys(t).length&&"string"==typeof t.color&&"string"==typeof t.size,message:'ball expects an object with two string properties: "color" and "size".'}]),b("from",i,["HTMLElement","string"]),b("to",s,["HTMLElement","string"]),b("direction",n,"string",[{test:t=>["center","top-right","top-left","bottom-right","bottom-left"].includes(t),message:"direction expects one of [center, top-right, top-left, bottom-right, bottom-left]"}]),b("showDelay",o,"number"),b("hideDelay",r,"number"),b("onShow",a,["function","null"]),b("onHide",h,["function","null"])}u(t){if(this.hidden=!1,this.oe=null,this.re=null,this.ae=null,this.he=null,this.hidden)return;const e=q(t.from),i=q(t.to);if(!e||!i)throw this.destroy(),new Error("Parabola: from or to element not found.");this.le(t)}le(t){if(this.hidden||this.oe)return;const{color:e,size:i}=t.ball;this.oe=R("div",{className:"parabola-ball",style:{backgroundColor:e,width:i,height:i,position:"fixed",borderRadius:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:"9999",opacity:"1"}}),document.body.appendChild(this.oe)}ce(t){var e,i;const s=null==(e=q(t.from))?void 0:e.getBoundingClientRect(),n=null==(i=q(t.to))?void 0:i.getBoundingClientRect();if(!s||!n)return null;const{left:o,top:r,width:a,height:h}=s,{left:l,top:c,width:d,height:u}=n;let m,f;switch(t.direction){case"top-left":m=o+.2*a,f=r+.2*h;break;case"top-right":m=o+.8*a,f=r+.2*h;break;case"bottom-left":m=o+.2*a,f=r+.8*h;break;case"bottom-right":m=o+.8*a,f=r+.8*h;break;default:m=o+a/2,f=r+h/2}return{startX:m,startY:f,endX:l+d/2,endY:c+u/2}}de(t){return 1-(1-t)**3}ue(t,e,i,s,n=800){if(this.hidden)return;const o=performance.now(),r=i-t,a=s-e,h=i=>{if(this.hidden)return;const s=i-o,l=Math.min(s/n,1),c=this.de(l),d=t+r*c,u=e+-100*Math.sin(Math.PI*c)+a*c,m=1-l;this.oe.style.left=`${d}px`,this.oe.style.top=`${u}px`,this.oe.style.opacity=`${m}`,this.oe.style.transform=`translate(-50%, -50%) scale(${1-.3*c})`,l<1?this.re=requestAnimationFrame(h):this.destroy()};this.re=requestAnimationFrame(h)}async show(){return!this.hidden&&new Promise(t=>{this.ae=setTimeout(()=>{if(this.hidden)return void t(!1);const e=this.ce(this.options);if(!e)return this.destroy(),void t(!1);this.oe.style.left=`${e.startX}px`,this.oe.style.top=`${e.startY}px`,this.options.onShow&&this.options.onShow(),this.ue(e.startX,e.startY,e.endX,e.endY),t(!0)},this.options.showDelay)})}destroy(){var t;(null==(t=this.oe)?void 0:t.parentNode)&&this.oe.parentNode.removeChild(this.oe),this.ae&&clearTimeout(this.ae),this.he&&clearTimeout(this.he),this.re&&cancelAnimationFrame(this.re),this.oe=null,this.hidden=!0,this.options.onHidden&&this.options.onHidden()}start(){return this.show()}}export{ut as accordion,m as computed,Z as container,I as copy,tt as createEffect,et as createMemo,Q as createSignal,y as destroyAll,ft as drop,u as effect,S as escapeHtml,A as getCookie,q as getEl,E as getLang,k as getLanguages,_ as getLocale,f as getType,w as isClass,p as isFunction,M as isMobile,B as log,x as manager,st as modal,R as newEl,F as off,rt as offcanvas,O as on,gt as parabola,L as postJson,P as q,j as randomId,c as reactive,d as ref,g as release,H as removeCookie,z as restUrl,N as setCookie,$ as setLanguages,v as singleton,U as store,C as t,ct as tabs,ht as theme,nt as toast,bt as tooltip,h as track,l as trigger,T as uuid,b as validate,vt as validator};
